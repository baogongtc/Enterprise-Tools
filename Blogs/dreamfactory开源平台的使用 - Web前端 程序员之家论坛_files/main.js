!function(){var n={inArray:function(n,e){var o;for(o=0;o<e.length;o++)if(e[o]==n)return!0;return!1},imgPing:function(n){var e=new Image,o="_img_"+Math.random();window[o]=e,e.onload=e.onerror=function(){window[o]=null},e.src=n},setCookie:function(n,e,o){if("number"==typeof o.expires){var i=new Date;i.setMilliseconds(i.getMilliseconds()+864e5*o.expires),o.expires=i}return e=encodeURIComponent(String(e)),e=e.replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),n=encodeURIComponent(String(n)),n=n.replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent),n=n.replace(/[\(\)]/g,escape),document.cookie=[n,"=",e,o.expires&&"; expires="+o.expires.toUTCString(),o.path&&"; path="+o.path,o.domain&&"; domain="+o.domain,o.secure?"; secure":""].join("")},getCookie:function(n){for(var e,o=document.cookie?document.cookie.split("; "):[],i=/(%[0-9A-Z]{2})+/g,t=0;t<o.length;t++){var a=o[t].split("="),c=a[0].replace(i,decodeURIComponent),r=a.slice(1).join("=");if('"'===r.charAt(0)&&(r=r.slice(1,-1)),r=r.replace(i,decodeURIComponent),n===c){e=r;break}n||(e[c]=r)}return e},objToQuery:function(n){if("object"==typeof n){var e,o="";for(e in n)o+=""===o?e+"="+window.encodeURIComponent(n[e]):"&"+e+"="+window.encodeURIComponent(n[e]);return o}}},e={advertLoad:[]},o=function(o,i,t,a,c,r){if(!(window.location.protocol&&window.location.protocol.indexOf("file:")>=0)){var d=function(n){var e={client_id:t};o.ajax({url:"http://changyan.sohu.com/api/2/user/info",cache:!1,dataType:"jsonp",data:e,success:function(e){n(e)},error:function(){n()}})},p=function(i,d){var p="",d=d||0;window.changyan&&window.changyan.api&&"function"==typeof window.changyan.api.ready?window.changyan.api.ready(function(n){var e=n.getUUID();"string"==typeof e&&32===e.length&&(p=e)}):window.cyan&&window.cyan.api&&"function"==typeof window.cyan.api.ready&&window.cyan.api.ready(function(n){var e=n.getUUID();"string"==typeof e&&32===e.length&&(p=e)});var s=function(e,o,i,a,c,r,s,l,g,u,f){var y={appId:t,advertId:e,agencyType:o,pce:i,tag:a,ref:c,uuid:p,uid:d};void 0!==r&&(y.rtbAdId=r),void 0!==s&&(y.winNoticeUrl=s),void 0!==l&&(y.dspId=l),void 0!==g&&(y.type=g),void 0!==u&&(y.category=u),void 0!==f&&(y.isCookieMapping=f),n.imgPing("http://e.changyan.sohu.com/dataService/v2/pv?"+n.objToQuery(y))},l=function(n,e,o,i,a,c,r,s,l,g,u){var f={appId:t,advertId:n,agencyType:e,pce:o,tag:i,ref:a,category:g,uuid:p,uid:d};void 0!==c&&(f.rtbAdId=c),void 0!==r&&(f.dspId=r),void 0!==s&&(f.isCookieMapping=s),void 0!==l&&(f.type=l),void 0!==u&&(f.landingUrl=u);var y,w="http://e.changyan.sohu.com/dataService/v2/click?";for(y in f)w+=y+"="+window.encodeURIComponent(f[y])+"&";w.substring(0,w.length-1),f.landingUrl&&window.open(w)},g={appId:t,category:a,title:c,url:r,position:i,uuid:p,uid:d};1607===g.position&&(g.isLeft=!0),1608===g.position&&(g.isLeft=!1,g.position=1607),o.ajax({url:"http://e.changyan.sohu.com/dataService/v2/getData",data:g,dataType:"jsonp",success:function(i){if(0===i.code){var a={};("RTB"===i.agencyType||"AGENCY"===i.agencyType)&&(a=o.parseJSON(i.advertContent),function(){a.exposure_urls instanceof window.Array&&o.each(a.exposure_urls,function(e,i){i.exposureUrl instanceof window.Array&&"number"==typeof i.timeMillis&&o.each(i.exposureUrl,function(e,o){n.imgPing(o)})})}()),i.cookieMappingList&&i.cookieMappingList.length&&o.each(i.cookieMappingList,function(e,o){n.imgPing(o)}),s(i.advertId,i.agencyType,i.pce,i.tag,i.ref,a.rtbAdId,a.winNoticeUrl,a.dspId,a.type,a.category,a.isCookieMapping),i.params=g,i.sendClickLog=function(){"RTB"===i.agencyType&&a.clickUrls&&a.clickUrls.length&&o.each(a.clickUrls,function(e,o){n.imgPing(o)}),l(i.advertId,i.agencyType,i.pce,i.tag,i.ref,a.rtbAdId,a.dspId,a.cookieMapping,a.type,a.category,a.landingUrl)},i.statVisibility=function(e){var c={IMAGE:"0",FLASH:"1",JS:"3",IFRAME:"5"},r={appId:t,advertId:i.advertId,agencyType:i.agencyType,showType:c[i.advertType],uuid:p,uid:d,pce:i.pce,tag:i.tag,ref:i.ref};"RTB"===i.agencyType&&(r=o.extend(r,{rtbAdId:a.rtbAdId,dspId:a.dspId}));var s="http://e.changyan.sohu.com/dataService/v2/visibility?",l=!1,g=o(window);g.on("scroll.ad"+i.params.position,function(){var i=e.offset().top-g.height()+e.height()/2;g.scrollTop()>=i&&g.scrollTop()<=i+g.height()&&(l||(window.setTimeout(function(){if(g.scrollTop()>=i&&g.scrollTop()<=i+g.height()){r=o.extend(r,{screenWidth:g.width(),screenHeight:g.height(),Xcoordinate:e.offset().left,Ycoordinate:e.offset().top});var t;for(t in r)s+=t+"="+decodeURIComponent(r[t])+"&";n.imgPing(s.substring(0,s.length-1))}else l=!1},1e3),l=!0))}),g.trigger("scroll")};var c,r=e.advertLoad;for(c=0;c<r.length;c++)r[c](i)}}})},s=function(n){o.ajax({url:"http://e.changyan.sohu.com/dataService/getConfig",data:{appId:t},dataType:"jsonp",success:function(e){0===e.code&&"function"==typeof n&&n(e)}})};s(function(e){if(e){var c=["cyqemw6s1"],r=["1103","1105","6103"],s=!1,l=!0;if(!n.inArray(t,c)&&0===e.status){var g,u=[];for(g=0;g<e.positions.length;g++)n.inArray(e.positions[g],r)&&u.push(e.positions[g]);e.status=1,e.positions=u}if(e.disabledChannels&&e.disabledChannels.length&&!function(){var n;for(n=0;n<e.disabledChannels.length;n++)e.disabledChannels[n]===a&&(s=!0)}(),void 0!==a&&null!==a&&"null"!==a&&"cyqemw6s1"===t){l=!0;var f=["373993807","349370213","324766639","143746642","258991918","257528084","257528053","200466343","200057137","123","390221349","9090911195","201066330","224586132","322576792","244608874","219445970"],y="373993807";a.indexOf("|")>=0?y=a.split("|")[0]:a.indexOf(";")>=0?y=a.split(";")[0]:a&&""!==a&&(y=a),f.indexOf(y)<0&&(l=!1),s=l}if(1===e.status&&e.positions&&e.positions.length){var w=function(a){var d,g,u=!1,f=function(){var n=window.changyan&&window.changyan.api&&window.changyan.api.ready;u!==!0&&(n?window.changyan.api.ready(function(n){n.getBeConfig()?n.event.listen("changyan:cmt-header:box-click",function(){u!==!0&&(p(1105,a),u=!0)}):o(".post-default-w").one("click",function(){u!==!0&&(p(1105,a),u=!0)})}):o(".post-default-w").one("click",function(){u!==!0&&(p(1105,a),u=!0)}))};for(d=0;d<e.positions.length;d++)g=parseInt(e.positions[d],10),"wap"===i&&5e3>g||"pc"===i&&g>5e3||n.inArray(t,c)&&s||!(!n.inArray(e.positions[d],r)&&s||"pc"===i&&1530===g&&!document.getElementById("SOHUCS")&&s||"pc"===i&&1103===g&&(!o("#SOHUCS #SOHU_MAIN .list-newest-w .block-cont-gw").length||o("#SOHUCS #SOHU_MAIN .list-newest-w .block-cont-gw").length<5)||!("cyqemw6s1"===t&&l&&1103===g||("wap"!==i||6103!==g||o("#SOHUCS #cy-latest-list-wrapper article").length&&!(o("#SOHUCS #cy-latest-list-wrapper article").length<5))&&("pc"===i&&1105===g&&(!o("#SOHUCS").length||o("#SOHUCS").width()<570||o("#SOHUCS").width()>800||o(".post-default-w").length)?o(".post-default-w").length&&f():p(g,a))))};"mark"===n.getCookie("cy-mark")?d(function(e){var o;e&&e.user_id?o=e.user_id:n.setCookie("cy-mark",null,{expires:-1,path:"/"}),w(o)}):(w(),window.setTimeout(function(){d(function(e){e&&e.user_id&&n.setCookie("cy-mark","mark",{expires:30,path:"/"})})},5e3))}}})}},i=function(n){if(window.XMLHttpRequest){var e=n.type,i=n.appId,t="null",a=window.document.title,c=window.location.href;"pc"!==e&&"wap"!==e&&(e="pc"),n.hasOwnProperty("categoryId")&&void 0!==n.categoryId&&(t=n.categoryId),n.hasOwnProperty("title")&&(a=n.title),n.hasOwnProperty("url")&&(c=n.url),o(window.changyanjQuery||window.cyanZepto||window.jQuery,e,i,t,a,c)}};i.on=function(n,o){e[n]&&"function"==typeof o&&e[n].push(o)},"function"!=typeof window.changyanDSP&&(window.changyanDSP=i)}();