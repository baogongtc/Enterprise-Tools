!function(){var e=function(e){var n=e,o=!1;if(e.positions.length)for(i=0;i<e.positions.length;i++)"6103"===e.positions[i]&&0===e.status&&(o=!0);return o&&(n.positions=["6103"],n.status=1),n},n=function(e){var n=new Image,o="_img_"+Math.random();window[o]=n,n.onload=n.onerror=function(){window[o]=null},n.src=e},o={set:function(e,n,o){if("number"==typeof o.expires){var i=new Date;i.setMilliseconds(i.getMilliseconds()+864e5*o.expires),o.expires=i}return n=encodeURIComponent(String(n)),n=n.replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),e=encodeURIComponent(String(e)),e=e.replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent),e=e.replace(/[\(\)]/g,escape),document.cookie=[e,"=",n,o.expires&&"; expires="+o.expires.toUTCString(),o.path&&"; path="+o.path,o.domain&&"; domain="+o.domain,o.secure?"; secure":""].join("")},get:function(e){for(var n,o=document.cookie?document.cookie.split("; "):[],i=/(%[0-9A-Z]{2})+/g,t=0;t<o.length;t++){var a=o[t].split("="),c=a[0].replace(i,decodeURIComponent),r=a.slice(1).join("=");if('"'===r.charAt(0)&&(r=r.slice(1,-1)),r=r.replace(i,decodeURIComponent),e===c){n=r;break}e||(n[c]=r)}return n}},t={advertLoad:[]},a=function(i,a,c,r,d,p){if(!(window.location.protocol&&window.location.protocol.indexOf("file:")>=0)){var s=function(e){var n={client_id:c};i.ajax({url:"http://changyan.sohu.com/api/2/user/info",cache:!1,dataType:"jsonp",data:n,success:function(n){e(n)},error:function(){e()}})},u=function(e,o){var a="",o=o||0;window.changyan&&window.changyan.api&&"function"==typeof window.changyan.api.ready?window.changyan.api.ready(function(e){var n=e.getUUID();"string"==typeof n&&32===n.length&&(a=n)}):window.cyan&&window.cyan.api&&"function"==typeof window.cyan.api.ready&&window.cyan.api.ready(function(e){var n=e.getUUID();"string"==typeof n&&32===n.length&&(a=n)});var s=function(e,n,t,r,d,p,s,u,l,f,g){var y={appId:c,advertId:e,agencyType:n,pce:t,tag:r,ref:d,uuid:a,uid:o};void 0!==p&&(y.rtbAdId=p),void 0!==s&&(y.winNoticeUrl=s),void 0!==u&&(y.dspId=u),void 0!==l&&(y.type=l),void 0!==f&&(y.category=f),void 0!==g&&(y.isCookieMapping=g),i.ajax({url:"http://e.changyan.sohu.com/dataService/v2/pv",dataType:"jsonp",data:y})},u=function(e,n,i,t,r,d,p,s,u,l,f){var g={appId:c,advertId:e,agencyType:n,pce:i,tag:t,ref:r,category:l,uuid:a,uid:o};void 0!==d&&(g.rtbAdId=d),void 0!==p&&(g.dspId=p),void 0!==s&&(g.isCookieMapping=s),void 0!==u&&(g.type=u),void 0!==f&&(g.landingUrl=f);var y,h="http://e.changyan.sohu.com/dataService/v2/click?";for(y in g)h+=y+"="+window.encodeURIComponent(g[y])+"&";h.substring(0,h.length-1),window.open(h)},l={appId:c,category:r,title:d,url:p,position:e,uuid:a,uid:o};1607===l.position&&(l.isLeft=!0),1608===l.position&&(l.isLeft=!1,l.position=1607),i.ajax({url:"http://e.changyan.sohu.com/dataService/v2/getData",data:l,dataType:"jsonp",success:function(e){if(0===e.code){var r={};("RTB"===e.agencyType||"AGENCY"===e.agencyType)&&(r=i.parseJSON(e.advertContent),function(){r.exposure_urls instanceof window.Array&&i.each(r.exposure_urls,function(e,o){o.exposureUrl instanceof window.Array&&"number"==typeof o.timeMillis&&window.setTimeout(function(){i.each(o.exposureUrl,function(e,o){n(o)})},1e3*o.timeMillis)})}()),e.cookieMappingList&&e.cookieMappingList.length&&i.each(e.cookieMappingList,function(e,o){n(o)}),s(e.advertId,e.agencyType,e.pce,e.tag,e.ref,r.rtbAdId,r.winNoticeUrl,r.dspId,r.type,r.category,r.isCookieMapping),e.params=l,e.sendClickLog=function(){"RTB"===e.agencyType&&r.clickUrls&&r.clickUrls.length&&i.each(r.clickUrls,function(e,o){n(o)}),u(e.advertId,e.agencyType,e.pce,e.tag,e.ref,r.rtbAdId,r.dspId,r.cookieMapping,r.type,r.category,r.landingUrl)},e.statVisibility=function(t){var d={IMAGE:"0",FLASH:"1",JS:"3",IFRAME:"5"},p={appId:c,advertId:e.advertId,agencyType:e.agencyType,showType:d[e.advertType],uuid:a,uid:o};"RTB"===e.agencyType&&(p=i.extend(p,{rtbAdId:r.rtbAdId,dspId:r.dspId}));var s="http://e.changyan.sohu.com/dataService/v2/visibility?",u=!1,l=i(window);l.on("scroll.ad"+e.params.position,function(){var e=t.offset().top-l.height()+t.height()/2;l.scrollTop()>=e&&l.scrollTop()<=e+l.height()&&(u||(window.setTimeout(function(){if(l.scrollTop()>=e&&l.scrollTop()<=e+l.height()){p=i.extend(p,{screenWidth:l.width(),screenHeight:l.height(),Xcoordinate:t.offset().left,Ycoordinate:t.offset().top});var o;for(o in p)s+=o+"="+decodeURIComponent(p[o])+"&";n(s.substring(0,s.length-1))}else u=!1},1e3),u=!0))})};var d,p=t.advertLoad;for(d=0;d<p.length;d++)p[d](e)}}})},l=function(e){i.ajax({url:"http://e.changyan.sohu.com/dataService/getConfig",data:{appId:c},dataType:"jsonp",success:function(n){0===n.code&&"function"==typeof e&&e(n)}})};l(function(n){n=e(n);var i,t=!1;for(i=0;i<n.positions.length;i++)"6103"===n.positions[i]&&(t=!0);if(n&&1===n.status){if(n.disabledChannels&&n.disabledChannels.length){var c=!0;if(function(){var e;for(e=0;e<n.disabledChannels.length;e++)n.disabledChannels[e]===r&&(c=!1)}(),c===!1&&!t)return;c===!1&&t&&(n.positions=["6103"])}if(n.positions&&n.positions.length){var d=function(e){var o,i;for(o=0;o<n.positions.length;o++)i=parseInt(n.positions[o],10),"wap"===a&&5e3>i||"pc"===a&&i>5e3||("pc"!==a||1530!==i||document.getElementById("SOHUCS"))&&u(i,e)};"mark"===o.get("cy-mark")?s(function(e){var n;e&&e.user_id?n=e.user_id:o.set("cy-mark",null,{expires:-1,path:"/"}),d(n)}):(d(),window.setTimeout(function(){s(function(e){e&&e.user_id&&o.set("cy-mark","mark",{expires:30,path:"/"})})},5e3))}}})}},c=function(e){if(window.XMLHttpRequest){var n=e.type,o=e.appId,i="null",t=window.document.title,c=window.location.href;"pc"!==n&&"wap"!==n&&(n="pc"),e.hasOwnProperty("categoryId")&&void 0!==e.categoryId&&(i=e.categoryId),e.hasOwnProperty("title")&&(t=e.title),e.hasOwnProperty("url")&&(c=e.url),a(window.changyanjQuery||window.cyanZepto||window.jQuery,n,o,i,t,c)}};c.on=function(e,n){t[e]&&"function"==typeof n&&t[e].push(n)},"function"!=typeof window.changyanDSP&&(window.changyanDSP=c)}();