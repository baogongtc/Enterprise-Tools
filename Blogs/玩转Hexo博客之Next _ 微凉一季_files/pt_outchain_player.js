(function(){var bd=NEJ.P,cg=NEJ.O,bb=bd("nej.e"),bj=bd("nej.v"),bm=bd("nej.u"),bA=bd("nej.j"),bI=bd("nej.ut"),eT=bd("nm.u"),bc,bO;eT.CY=NEJ.C();bc=eT.CY.bU(bI.dZ);bc.dv=function(){this.dC();bb.rW({src:"http://music.163.com/style/swf/CloudMusicPlayer.swf?v=2014060988888",hidden:true,parent:document.body,params:{flashvars:"hostname="+location.hostname,allowscriptaccess:"always",wmode:"transparent"},onready:this.Cs.bi(this)});window.onIoError=this.wU.bi(this);window.onLoadProgress=this.wW.bi(this);window.onPlayProgress=this.sr.bi(this);window.onPlayComplete=this.bFp.bi(this)};bc.cR=function(){this.ta();this.cgu()};bc.Cs=function(hQ){this.cO=hQ;if(typeof console==="undefined"){console={}}console.aslog=this.bDM.bi(this);this.oF(this.bDx);this.hj(this.jw)};bc.bDM=function(cZ){this.cO.as_postMessage(cZ)};bc.ta=function(){delete this.jw;if(this.cO){this.cO.as_stop();this.cO.as_clear()}};bc.wU=function(dc){this.bK("onplayerror",{name:"ioerror",code:dc})};bc.wW=function(qV,dL){if(this.ig<1)return;this.bK("onloadprogress",{loaded:qV/1e3,duration:dL/1e3})};bc.sr=function(bDu,dL){this.ig=dL;this.bK("onplayprogress",{current:bDu/1e3,duration:dL/1e3})};bc.bFp=function(bl){this.bK("onstatechange",{state:4})};bc.hj=function(eR,Dc,tY){this.ta();if(Dc>0){bA.cG("/api/song/enhance/player/url",{type:"json",query:{ids:JSON.stringify([Dc]),br:128e3},onload:function(kf){if(kf.code==200&&kf.data&&kf.data.length){var cP=kf.data[0];if(cP.url){doPlay.call(this,cP.url)}}}.bi(this)})}else{doPlay.call(this,eR)}function doPlay(eR){if(!eR)return;this.jw=eR;this.ig=0;if(this.cO){this.cO.as_addSong({id:Dc,url:this.jw});if(tY===undefined)tY=true;if(tY){this.cO.as_play();this.bK("onstatechange",{state:1})}}}};bc.iC=function(){if(this.cO&&this.jw){this.cO.as_pause();this.bK("onstatechange",{state:2})}};bc.oT=function(){if(this.cO&&this.jw){this.cO.as_play();this.bK("onstatechange",{state:1})}};bc.cu=function(){this.ta();this.bK("onstatechange",{state:3})};bc.qH=function(jt){if(!this.cO||!this.jw)return;this.cO.as_setPosition(this.ig*jt);this.cO.currentTime=this.cO.duration*jt};bc.bFs=function(LQ){if(this.cO)this.cO.as_setMuted(!!LQ);this.bK("onmutedchange",{muted:LQ})};bc.oF=function(bD){this.bDx=bD;if(this.cO)this.cO.as_setVolume(bD);this.bK("onvolumechange",{value:bD})};bc.uv=function(){return this.cO&&this.cO.as_isPlaying()}})();
(function(){var bd=NEJ.P,cg=NEJ.O,bb=bd("nej.e"),bA=bd("nej.j"),bj=bd("nej.v"),bm=bd("nej.u"),bI=bd("nej.ut"),eT=bd("nm.u"),bc,bO;eT.Jf=NEJ.C();bc=eT.Jf.bU(bI.dZ);bc.dv=function(){var Xl=function(bX){bj.bt(this.cO,bX,this.bFy.bi(this,bX))};return function(){this.dC();this.cO=new Audio;this.lC=["play","pause","ended","playing","progress","loadeddata","timeupdate","error","emptied"];bm.cv(this.lC,Xl,this);this.bje=0;this.Hs=0}}();bc.cR=function(){this.ta();this.cV()};bc.ta=function(){if(!this.cO.currentSrc)return;this.UI();try{this.cO.currentTime=0}catch(e){}this.cO.pause();this.cO.src=""};bc.bFy=function(bX){switch(bX){case"play":case"loadeddata":if(bX=="loadeddata")this.UI();this.bK("onstatechange",{state:0});break;case"pause":this.bK("onstatechange",{state:2});break;case"ended":this.bK("onstatechange",{state:4});break;case"playing":this.bK("onstatechange",{state:1});break;case"progress":if(!this.cO.buffered.length)return;var bb=this.cO.buffered.end(0);this.bK("onloadprogress",{loaded:bb,duration:this.cO.duration});break;case"timeupdate":this.bK("onplayprogress",{current:this.cO.currentTime,duration:this.cO.duration});break;case"emptied":break;case"error":var dc=this.cO.error,cJ=this.cO.currentSrc,UJ=this.cO.currentTime;if(dc){switch(dc.code){case dc.MEDIA_ERR_ABORTED:case dc.MEDIA_ERR_DECODE:case dc.MEDIA_ERR_ENCRYPTED:this.bK("onplayerror",{error:dc.code,src:cJ,time:UJ});break;case dc.MEDIA_ERR_NETWORK:this.bji(cJ,UJ);break;case dc.MEDIA_ERR_SRC_NOT_SUPPORTED:if(!!this.cO.src&&this.cO.src!="http://"+location.host+"/"&&this.cO.src.indexOf("#")<0){this.bK("onplayerror",{error:dc.code,src:cJ,time:UJ})}break;default:this.bK("onplayerror",{error:-1,src:cJ,time:UJ});break}}break}};bc.hj=function(eR,Dc,tY){this.UI();if(Dc>0){bA.cG("/api/song/enhance/player/url",{type:"json",query:{ids:JSON.stringify([Dc]),br:128e3},onload:function(kf){if(kf.code==200&&kf.data&&kf.data.length){var cP=kf.data[0];if(cP.url){doPlay.call(this,cP.url)}}}.bi(this)})}else{doPlay.call(this,eR)}function doPlay(eR){this.cO.src=eR;if(tY===undefined)tY=true;if(tY){this.cO.play()}}};bc.UI=function(){this.Hs=0;this.bje=clearTimeout(this.bje)};bc.bji=function(eR,bjl){if(!eR||this.Hs>5){if(this.Hs>5)this.bK("onplayerror",{error:2,src:eR,time:bjl});this.UI();return}if(this.Hs>0){var bv=eR.indexOf("#");eR=bv>=0?eR.substring(0,bv):eR;this.cO.src=eR+"#t="+bjl;this.cO.play()}this.Hs++;this.bje=setTimeout(arguments.callee.bi(this,eR,bjl),5e3)};bc.iC=function(){this.cO.pause()};bc.oT=function(){this.cO.play()};bc.cu=function(){this.ta();this.bK("onstatechange",{state:3})};bc.qH=function(jt){if(!this.cO.currentSrc)return;this.cO.currentTime=this.cO.duration*jt};bc.bFs=function(LQ){this.cO.muted=!!LQ;this.bK("onmutedchange",{muted:LQ})};bc.oF=function(bD){this.cO.volume=bD;this.bK("onvolumechange",{value:bD})};bc.uv=function(){return this.cO.currentTime>0&&!this.cO.ended&&!this.cO.paused}})();
(function(){var bd=NEJ.P,cg=NEJ.O,gm=NEJ.R,bb=bd("nej.e"),bj=bd("nej.v"),bM=bd("nej.ut"),zA;if(!!bM.Va)return;bM.Va=NEJ.C();zA=bM.Va.bU(bM.dZ);zA.dv=function(){this.ko={onchange:this.xm.bi(this),ondragend:this.xm.gY(this,!0)};this.dC()};zA.cz=function(bf){this.cB(bf);this.ko.view=bb.bG(bf.track);this.ko.body=bb.bG(bf.slide);this.ko.mbar=this.ko.view;this.tg(bf.range);this.dq([[this.ko.view,"mousedown",this.bCZ.bi(this)]]);this.lA=bM.zm.bF(this.ko)};zA.cR=function(){this.cV();this.lA.bW();delete this.lA;delete this.hL;delete this.ko.view;delete this.ko.body;delete this.ko.mbar};zA.xm=function(be,kp){var bjO=be.left/this.hL.x[1],bjN=be.top/this.hL.y[1],bjJ=this.hL.x,bjI=this.hL.y;this.bK("onchange",{stopped:!!kp,x:{rate:bjO,value:bjO*(bjJ[1]-bjJ[0])},y:{rate:bjN,value:bjN*(bjI[1]-bjI[0])}})};zA.bCZ=function(be){var cq=bb.jX(this.ko.view),bnF={x:bj.mS(be),y:bj.qi(be)},el={x:Math.floor(this.ko.body.offsetWidth/2),y:Math.floor(this.ko.body.offsetHeight/2)};this.lA.hn({top:bnF.y-cq.y-el.y,left:bnF.x-cq.x-el.x})};zA.tg=function(dQ){var qk;if(!!this.hL){var ld=this.lA.bdj();qk={x:ld.left/this.hL.x[1],y:ld.top/this.hL.y[1]}}dQ=dQ||cg;var bCW=(dQ.x||gm)[1]||this.ko.view.clientWidth-this.ko.body.offsetWidth,bCX=(dQ.y||gm)[1]||this.ko.view.clientHeight-this.ko.body.offsetHeight;this.hL={x:dQ.x||[0,bCW],y:dQ.y||[0,bCX]};if(!!qk)this.hn(qk);return this};zA.hn=function(qk){qk=qk||cg;this.lA.hn({top:this.hL.y[1]*(qk.y||0),left:this.hL.x[1]*(qk.x||0)})}})();
(function(){var bM=NEJ.P("nej.ut"),bjM;if(!!bM.EP)return;bM.EP=NEJ.C();bjM=bM.EP.bU(bM.Va);bjM.dv=function(){this.dC();this.ko.direction=2}})();
(function(){var bd=NEJ.P,bb=bd("nej.e"),bj=bd("nej.v"),bM=bd("nej.p"),di=bd("nej.ui"),fc=bd("nej.ut"),bT=bd("nm.w"),bc,bO;bT.ww=NEJ.C();bc=bT.ww.bU(di.gh);bO=bT.ww.dr;bc.dv=function(){this.dC()};bc.cz=function(bf){this.cB(bf);this.bs=bb.bG(bf.content);this.lD=bb.bG(bf.slide);this.jw=bb.bG(bf.track);this.bli=bf.speed;this.bhd=this.bs.scrollHeight-this.bs.clientHeight;bb.ch(this.lD,"height",(this.bs.clientHeight/this.bs.scrollHeight*parseInt(bb.ey(this.jw,"height"))||0)+"px");if(this.bs.scrollHeight<=this.bs.clientHeight)bb.ch(this.lD,"display","none");else bb.ch(this.lD,"display","block");this.tq=fc.EP.bF({slide:this.lD,track:this.jw,onchange:this.bgX.bi(this)});if(bM.ek.browser!="firefox")this.dq([[this.bs,"mousewheel",this.AP.bi(this)]]);else{this.bs.addEventListener("DOMMouseScroll",this.AP.bi(this),false)}};bc.cR=function(){this.cV();this.tq.bW();delete this.bs;delete this.lD;delete this.jw;delete this.hL;delete this.bli};bc.bgX=function(be){this.bs.scrollTop=parseInt(this.bhd*be.y.rate)};bc.AP=function(be){bj.dp(be);this.bhd=this.bs.scrollHeight-this.bs.clientHeight;var el=0,DF,en,hs;en=parseInt(this.jw.clientHeight)-parseInt(bb.ey(this.lD,"height"));el=be.wheelDelta?be.wheelDelta/120:-be.detail/3;DF=parseInt(bb.ey(this.lD,"top"))-el*this.bli;if(DF<0)DF=0;if(DF>en)DF=en;bb.ch(this.lD,"top",DF+"px");hs=parseInt(bb.ey(this.lD,"top"));this.tq.bK("onchange",{y:{rate:hs/en}})};bc.os=function(){this.bhd=this.bs.scrollHeight-this.bs.clientHeight;this.tq.hn({x:0,y:0});bb.ch(this.lD,"height",this.bs.clientHeight/this.bs.scrollHeight*parseInt(this.jw.clientHeight)+"px");this.tq.tg({x:[],y:[0,this.jw.clientHeight-parseInt(bb.ey(this.lD,"height"))]});if(this.bs.scrollHeight<=this.bs.clientHeight)bb.ch(this.lD,"display","none");else bb.ch(this.lD,"display","block")};bc.hn=function(hl){this.tq.hn(hl)};bc.DG=function(bgT){var bRm=parseInt(bb.ey(this.lD,"height"));var bRs=parseInt(bb.ey(this.jw,"height"));var us=bRs-bRm;var hs=parseInt(us*bgT)+"px";bb.ch(this.lD,"top",hs)};bc.blu=function(){if(this.bs.scrollHeight<=this.bs.clientHeight)return;var bgT=this.bs.scrollTop/(this.bs.scrollHeight-this.bs.clientHeight);this.DG(bgT)};bc.ces=function(){if(this.tq)this.tq.tg()}})();
(function(){var bd=NEJ.P,bb=bd("nej.e"),bj=bd("nej.v"),bM=bd("nej.ut"),tR;bM.CT=NEJ.C();tR=bM.CT.bU(bM.dZ);tR.cz=function(bf){this.cB(bf);this.bDc=!!bf.reset;this.WI=parseInt(bf.delta)||0;this.jw=bb.bG(bf.track);this.bjR=bb.bG(bf.progress);this.dq([[bf.thumb,"mousedown",this.bDp.bi(this)],[document,"mousemove",this.bjT.bi(this)],[document,"mouseup",this.bjz.bi(this)],[this.jw,"mousedown",this.bDw.bi(this)]]);var jt=bf.value;if(jt==null){jt=this.bjR.offsetWidth/this.jw.offsetWidth}this.hn(jt)};tR.cR=function(){if(!!this.bDc)this.UX(0);this.cV()};tR.bDp=function(be){if(!!this.iL)return;bj.cu(be);this.iL=bj.mS(be);this.bjX=this.jw.offsetWidth};tR.bjT=function(be){if(!this.iL)return;var cq=bj.mS(be),el=cq-this.iL;this.iL=cq;this.UX(this.CX+el/this.bjX);this.bK("onslidechange",{ratio:this.CX})};tR.bjz=function(be){if(!this.iL)return;this.bjT(be);delete this.iL;delete this.bjX;this.bK("onslidestop",{ratio:this.CX})};tR.bDw=function(be){var bDX=bb.jX(this.jw).x,bEL=bj.mS(be);this.UX((bEL-bDX+this.WI)/this.jw.offsetWidth);this.bK("onslidestop",{ratio:this.CX})};tR.UX=function(jt){this.CX=Math.max(0,Math.min(1,jt));bb.ch(this.bjR,"width",this.CX*100+"%")};tR.hn=function(jt){if(!!this.iL)return;this.UX(jt)};tR.bdj=function(jt){return this.CX}})();
(function(){var bd=NEJ.P,gm=NEJ.R,bb=bd("nej.e"),bM=bd("nej.p"),bj=bd("nej.v"),bm=bd("nej.u"),bI=bd("nej.ut"),bA=bd("nej.j"),bQ=bd("nm.m"),eT=bd("nm.u"),bn=bd("nm.x"),bT=bd("nm.w"),bc,bO;bQ.KA=NEJ.C();bc=bQ.KA.prototype;bc.dv=function(){this.hN=location.parse(location.href).query;this.bs=bb.bG("player");this.Uq();this.bKa();this.dm();this.bbw();this.bBc();this.bKb();this.ep.oF(.8)};bc.Uq=function(){var yw=bb.ef("audio"),eG=yw.canPlayType&&yw.canPlayType("audio/mpeg")?eT.Jf:eT.CY;this.ep=eG.bF({onstatechange:this.iA.bi(this),onloadprogress:this.wW.bi(this),onplayprogress:this.sr.bi(this)})};bc.bKa=function(){if(this.hN.height==32){this.dy="player-sm"}else if(this.hN.height==66){this.dy="player-mid"}else if(this.hN.height==90){this.dy="player-bg"}else{this.dy="player-list"}if(this.hN.bg){bb.ch(document.body,"background","#"+this.hN.bg)}this.bs.innerHTML=bb.jZ(this.dy)};bc.dm=function(){this.oA=bb.bG("cover");this.kP=bb.bG("title");this.FM=bb.bG("bar");this.lm=bb.bG("time");this.ip=bb.bG("prev");this.MU=bb.bG("next");this.hr=bb.bG("play");this.bxj=bb.bG("pause");this.cfI=bb.bG("open");this.cW=bb.bG("list");this.Bw=bb.bG("list-box");this.Gz=bb.bG("loading");this.bxh=bb.bG("ctrl-box");this.bxg=bb.bG("sm-mid");this.bxf=bb.bG("mid-ctrl");bj.bt(this.bs,"click",this.cS.bi(this));bj.bt(document,"mouseout",this.Nc.bi(this));bj.bt(window,"resize",this.DE.bi(this));bj.bt(window,"beforeunload",this.Zn.bi(this))};bc.bbw=function(){var bk=bb.bP(this.FM,"j-flag");this.tq=bI.CT.bF({track:this.FM,thumb:bk[1],progress:bk[0],onslidechange:this.bgX.bi(this),onslideStop:this.bjz.bi(this)})};bc.bBc=function(){if(!this.cW)return;var bk=bb.bP(this.cW,"j-flag");this.iJ=bT.ww.bF({content:this.Bw,slide:bk[1],track:bk[0],speed:5})};bc.bKb=function(){var bKj={0:"/api/playlist/detail",1:"/api/album/{id}",2:"/api/song/detail",3:"/api/dj/program/detail",4:"/api/dj/program/byradio?radioId={id}"},bZ=bKj[this.hN.type];bA.cG(bn.Fn(bZ,this.hN),{type:"json",query:{id:this.hN.id,ids:JSON.stringify([this.hN.id]),limit:1e4,offset:0},onload:this.bxb.bi(this),onerror:this.bxb.bi(this)})};bc.bxb=function(be){if(be.code==200){switch(parseInt(this.hN.type)){case 0:this.ho=be.result.tracks;this.kP.innerHTML=bb.dg("title",{title:bm.fd(be.result.name)});this.Nf(be.result.coverImgUrl);break;case 1:this.ho=be.album.songs;this.kP.innerHTML=bb.dg("title",{title:be.album.name,sub:be.album.artist.name});this.Nf(be.album.picUrl);break;case 2:this.ho=be.songs;var co=be.songs[0],gD=[];bm.cv(co.artists,function(sM){gD.push(sM.name)});this.kP.innerHTML=bb.dg("title",{title:co.name,sub:gD.join("/")});this.Nf(co.album.picUrl);break;case 3:this.ho=[be.program.mainSong];this.kP.innerHTML=bb.dg("title",{title:bm.fd(be.program.name)});this.Nf(be.program.coverUrl);break;case 4:if(be.programs&&be.programs.length){var eC=be.programs[0].radio;this.kP.innerHTML=bb.dg("title",{title:bm.fd(eC.name)});this.Nf(eC.picUrl);this.ho=[];bm.cv(be.programs,function(dN){if(dN.mainSong){dN.mainSong.name=dN.name;dN.mainSong.artists=[{name:eC.name}];this.ho.push(dN.mainSong)}},this)}break}this.bKm();if(parseInt(this.hN.auto)){this.Bo(0)}this.DE();this.oi();if(this.iJ)this.iJ.os()}else{alert("资源加载失败")}};bc.Bo=function(bv){bv=parseInt(bv)||0;if(bv>this.ho.length-1){bv=0}else if(bv<0){bv=this.ho.length-1}var bl=this.ho[bv];if(bl.status<0||bl.fee>0)return;this.ep.hj(bl.mp3Url,bl.id);this.El=bv};bc.bKm=function(){window.setTimeout(function(){if((this.kP.clientHeight||this.kP.scrollHeight)>33){this.kP.innerHTML='<marquee scrollamount="2" onmouseover="this.stop()" onmouseout="this.start()">'+this.kP.innerHTML+"</marquee>"}}.bi(this),100)};bc.Nf=function(eR){if(this.oA){this.oA.src=eR+"?param=90y90"}};bc.oi=function(){if(this.Bw){bb.fR(this.Bw,"song-list",{playIndex:this.El,songs:this.ho},{getArtist:bn.ph});this.DE(true)}};bc.cS=function(be){var bh=bj.bY(be,"d:action");switch(bb.bz(bh,"action")){case"play":if(typeof this.El=="undefined"){this.Bo(0);this.oi()}else{this.ep.oT()}break;case"pause":this.ep.iC();break;case"next":this.Bo(this.El+1);this.oi();break;case"prev":this.Bo(this.El-1);this.oi();break;case"playByIndex":this.Bo(bb.bz(bh,"index"));this.oi();break;case"open":if(bb.cU(this.cW,"z-close")){bb.bH(this.cW,"z-close")}else{bb.bJ(this.cW,"z-close")}break;case"home":window.open("http://music.163.com");break}};bc.bgX=function(be){};bc.bjz=function(be){if(be.ratio==1){this.Bo(this.El+1);this.oi();return}this.ep.qH(be.ratio)};bc.iA=function(be){switch(be.state){case 1:bb.bJ(this.hr,"f-hide");bb.bH(this.bxj,"f-hide");break;case 2:bb.bH(this.hr,"f-hide");bb.bJ(this.bxj,"f-hide");break;case 4:this.Bo(this.El+1);this.oi();break}};bc.wW=function(){};bc.sr=function(be){if(this.lm){this.lm.innerText="- "+bn.nJ(be.duration-be.current)}this.tq.hn(be.current/be.duration)};bc.DE=function(bKp){var eZ=document.body.clientWidth-20,en=document.body.clientHeight-20;bb.la(this.bs,{width:eZ+"px",height:en+"px"});if(this.bxh){bb.ch(this.bxh,"width",eZ-20-90+"px")}if(this.Bw){var bKq=bb.bP(this.Bw,"name"),bKr=bb.bP(this.Bw,"by"),bwZ=eZ-68;bm.cv(bKq,function(pX,bv){bb.ch(pX,"width",bwZ*.7+"px");bb.ch(bKr[bv],"width",bwZ*.3+"px");bb.ch(pX.parentNode,"width",eZ-18+"px")});bb.ch(this.Bw.parentNode,"height",en-130+"px");bb.ch(this.cW,"height",en-90+"px");if(this.iJ&&!bKp)this.iJ.os()}if(this.bxg){bb.ch(this.bxg,"width",eZ-84+"px")}if(this.bxf){bb.ch(this.bxf,"width",eZ-86+"px");bb.ch(this.FM,"width",eZ-86-44+"px");bb.ch(this.kP,"width",this.kP.parentNode.clientWidth-24+"px")}};bc.Nc=function(be){var dY=bj.mS(be),hv=bj.qi(be);if(dY<=0||hv<=0||dY>=document.body.clientWidth||hv>=document.body.clientHeight){bj.bK(document,"mouseup",be)}};bc.Zn=function(){this.ep.cu()};bb.dV("template-box");new bQ.KA})()