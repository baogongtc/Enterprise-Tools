!function(e,t){"function"==typeof define&&define.amd&&define.amd.dust===!0?define(["dust.core"],t):"object"==typeof exports?module.exports=t(require("dustjs-linkedin")):t(e.dust)}(this,function(e){function t(t,r,n){n=n||"INFO",t=t?"{@"+t+"}: ":"",e.log(t+r,n)}function r(e){d[e]||(t(e,"Deprecation warning: "+e+" is deprecated and will be removed in a future version of dustjs-helpers","WARN"),t(null,"For help and a deprecation timeline, see https://github.com/linkedin/dustjs-helpers/wiki/Deprecated-Features#"+e.replace(/\W+/g,""),"WARN"),d[e]=!0)}function n(e){return e.stack.tail&&e.stack.tail.head&&"undefined"!=typeof e.stack.tail.head.__select__}function s(e){return n(e)&&e.get("__select__")}function o(e,t){var r,n=e.stack.head,s=e.rebase();e.stack&&e.stack.tail&&(s.stack=e.stack.tail);var o={isPending:!1,isResolved:!1,isDeferredComplete:!1,deferreds:[]};for(r in t)o[r]=t[r];return s.push({__select__:o}).push(n,e.stack.index,e.stack.of)}function i(e){var t,r;if(e.isDeferredPending=!0,e.deferreds.length)for(e.isDeferredComplete=!0,t=0,r=e.deferreds.length;r>t;t++)e.deferreds[t]();e.isDeferredPending=!1}function u(e,t){return"function"==typeof t?t.toString().replace(/(^\s+|\s+$)/gm,"").replace(/\n/gm,"").replace(/,\s*/gm,", ").replace(/\)\{/gm,") {"):t}function a(e,t){return function(r,n,s,o){return l(r,n,s,o,e,t)}}function l(e,r,n,o,i,u){var a,l,d,p,f=n.block,h=n["else"],k=s(r)||{};if(k.isResolved&&!k.isDeferredPending)return e;if(o.hasOwnProperty("key"))l=o.key;else{if(!k.hasOwnProperty("key"))return t(i,"No key specified","WARN"),e;l=k.key}return p=o.type||k.type,l=c(r.resolve(l),p),d=c(r.resolve(o.value),p),u(l,d)?(k.isPending||(a=!0,k.isPending=!0),f&&(e=e.render(f,r)),a&&(k.isResolved=!0)):h&&(e=e.render(h,r)),e}function c(e,t){switch(t&&(t=t.toLowerCase()),t){case"number":return+e;case"string":return String(e);case"boolean":return e="false"===e?!1:e,Boolean(e);case"date":return new Date(e)}return e}var d={},p={tap:function(e,t,n){return r("tap"),n.resolve(e)},sep:function(e,t,r){var n=r.block;return t.stack.index===t.stack.of-1?e:n?n(e,t):e},first:function(e,t,r){return 0===t.stack.index?r.block(e,t):e},last:function(e,t,r){return t.stack.index===t.stack.of-1?r.block(e,t):e},contextDump:function(e,r,n,s){var o,i,a=r.resolve(s.to),l=r.resolve(s.key);switch(l){case"full":o=r.stack;break;default:o=r.stack.head}switch(i=JSON.stringify(o,u,2),a){case"console":t("contextDump",i);break;default:i=i.replace(/</g,"\\u003c"),e=e.write(i)}return e},math:function(e,r,n,u){var a,l=u.key,c=u.method,d=u.operand,p=u.round;if(!u.hasOwnProperty("key")||!u.method)return t("math","`key` or `method` was not provided","ERROR"),e;switch(l=parseFloat(r.resolve(l)),d=parseFloat(r.resolve(d)),c){case"mod":0===d&&t("math","Division by 0","ERROR"),a=l%d;break;case"add":a=l+d;break;case"subtract":a=l-d;break;case"multiply":a=l*d;break;case"divide":0===d&&t("math","Division by 0","ERROR"),a=l/d;break;case"ceil":case"floor":case"round":case"abs":a=Math[c](l);break;case"toint":a=parseInt(l,10);break;default:t("math","Method `"+c+"` is not supported","ERROR")}return"undefined"!=typeof a&&(p&&(a=Math.round(a)),n&&n.block?(r=o(r,{key:a}),e=e.render(n.block,r),i(s(r))):e=e.write(a)),e},select:function(e,r,n,u){var a=n.block,l={};return u.hasOwnProperty("key")&&(l.key=r.resolve(u.key)),u.hasOwnProperty("type")&&(l.type=u.type),a?(r=o(r,l),e=e.render(a,r),i(s(r))):t("select","Missing body block","WARN"),e},eq:a("eq",function(e,t){return e===t}),ne:a("ne",function(e,t){return e!==t}),lt:a("lt",function(e,t){return t>e}),lte:a("lte",function(e,t){return t>=e}),gt:a("gt",function(e,t){return e>t}),gte:a("gte",function(e,t){return e>=t}),any:function(e,r,n){var o=s(r);return o?o.isDeferredComplete?t("any","Must not be nested inside {@any} or {@none} block","ERROR"):e=e.map(function(e){o.deferreds.push(function(){o.isResolved&&(e=e.render(n.block,r)),e.end()})}):t("any","Must be used inside a {@select} block","ERROR"),e},none:function(e,r,n){var o=s(r);return o?o.isDeferredComplete?t("none","Must not be nested inside {@any} or {@none} block","ERROR"):e=e.map(function(e){o.deferreds.push(function(){o.isResolved||(e=e.render(n.block,r)),e.end()})}):t("none","Must be used inside a {@select} block","ERROR"),e},size:function(t,r,n,s){var o,i,u=s.key;if(u=r.resolve(s.key),u&&u!==!0)if(e.isArray(u))o=u.length;else if(!isNaN(parseFloat(u))&&isFinite(u))o=u;else if("object"==typeof u){o=0;for(i in u)u.hasOwnProperty(i)&&o++}else o=(u+"").length;else o=0;return t.write(o)}};for(var f in p)e.helpers[f]=p[f];return e}),dust.helpers.substr=function(e,t,r,n){var s=dust.helpers.tap(n.str,e,t),o=dust.helpers.tap(n.begin,e,t),i=dust.helpers.tap(n.end,e,t),u=dust.helpers.tap(n.len,e,t);return o=o||0,e.write("undefined"!=typeof u?s.substr(o,u):"undefined"!=typeof i?s.slice(o,i):s)},dust.helpers.truncate=function(e,t,r,n){var s=dust.helpers.tap(n.numTru,e,t),o=dust.helpers.tap(n.str,e,t);return o.length>s&&(o=o.substr(0,s)+"..."),e.write(o)},dust.helpers.imgPutversion=function(e,t,r,n){var s=document.getElementById("static-files-host").value,o=document.getElementById("static-version").value,i=dust.helpers.tap(n.url,e,t);"/"===i.charAt(0)&&(i=i.substr(1));var u=i.split("/");return u.splice(0,0,s),u.splice(2,0,o),e.write(u.join("/"))},dust.helpers.imgsrc=function(e,t,r,n){var s=document.getElementById("evertest_cfhost").value,o=dust.helpers.tap(n.type,e,t),i=dust.helpers.tap(n.subtype,e,t),u=dust.helpers.tap(n.uuid,e,t);return s=s+"/public/images/"+o+"/"+i+"/"+u+".jpg",e.write(s)},dust.helpers.imgPutStaticHost=function(e,t,r,n){var s=document.getElementById("s3-image-host").value,o=dust.helpers.tap(n.url,e,t);return"/"!=o.charAt(0)&&(o="/"+o),s+=o,e.write(s)},dust.helpers.getEvertestURL=function(e){var t=document.getElementById("evertestURL").value;return e.write(t)},dust.helpers.getEmbedPageURL=function(e){return e.write(document.location.origin)},dust.helpers.getPrettyDate=function(e,t){var r=new Date(t.stack.head.createdAt);return e.write(r.toDateString())},dust.helpers.truncate=function(e,t,r,n){var s=dust.helpers.tap(n.data,e,t),o=dust.helpers.tap(n.length,e,t);return e.write(s.substr(0,o)+"...")},dust.helpers.lowercase=function(e,t,r,n){var s=dust.helpers.tap(n.str,e,t);return e.write(s.toLowerCase())},dust.helpers.thousandconvert=function(e,t,r,n){var s=dust.helpers.tap(n.str,e,t),o=s.toString().split(".");return o[0]=o[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),e.write(o.join("."))},dust.helpers.twodecimals=function(e,t,r,n){var s=dust.helpers.tap(n.str,e,t),o=parseFloat(s).toFixed(2);return e.write(o)},dust.helpers.slugify=function(e,t,r,n){var s=dust.helpers.tap(n.str,e,t);return s=s.toString().toLowerCase().replace(/\s+/g,"-").replace(/[^\w\-]+/g,"").replace(/\-\-+/g,"-").replace(/^-+/,"").replace(/-+$/,""),e.write(s)},dust.helpers.if=function(chunk,context,bodies,params){var body=bodies.block,skip=bodies["else"],cond;if(params&&params.cond){if(cond=dust.helpers.tap(params.cond,chunk,context),"userLogin"===cond&&(cond=userIsLoggedIn()),eval(cond))return body?chunk.render(bodies.block,context):(_log("Missing body block in the if helper!"),chunk);if(skip)return chunk.render(bodies["else"],context)}else _log("No condition given in the if helper!");return chunk},dust.helpers.iterate=function(e,t,r,n){function s(e,t){return t>e?1:e>t?-1:0}function o(r,n,s){return p(e,t.push({$key:r,$num:s,$value:n,$type:typeof n}))}var i,u,a,l,c,d,p=r.block;if(n=n||{},n.key)if(c=dust.helpers.tap(n.key,e,t),p)if(n.sort){i=dust.helpers.tap(n.sort,e,t),u=[];for(l in c)c.hasOwnProperty(l)&&u.push(l);for(d=t.global[i],d||"desc"!==i||(d=s),d?u.sort(d):u.sort(),a=0;a<u.length;a++)e=o(u[a],c[u[a]],a)}else{var f=0;for(l in c)c.hasOwnProperty(l)&&(e=o(l,c[l],f++))}else _console.log("Missing body block in the iter helper.");else _console.log("Missing parameter 'key' in the iter helper.");return e};//# sourceMappingURL=dust-helpers.js.map