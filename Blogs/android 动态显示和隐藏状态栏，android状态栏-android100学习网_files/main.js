!function(){var e=function(e){var n=new Image,o="_img_"+Math.random();window[o]=n,n.onload=n.onerror=function(){window[o]=null},n.src=e},n={set:function(e,n,o){if("number"==typeof o.expires){var t=new Date;t.setMilliseconds(t.getMilliseconds()+864e5*o.expires),o.expires=t}return n=encodeURIComponent(String(n)),n=n.replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),e=encodeURIComponent(String(e)),e=e.replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent),e=e.replace(/[\(\)]/g,escape),document.cookie=[e,"=",n,o.expires&&"; expires="+o.expires.toUTCString(),o.path&&"; path="+o.path,o.domain&&"; domain="+o.domain,o.secure?"; secure":""].join("")},get:function(e){for(var n,o=document.cookie?document.cookie.split("; "):[],t=/(%[0-9A-Z]{2})+/g,a=0;a<o.length;a++){var i=o[a].split("="),c=i[0].replace(t,decodeURIComponent),r=i.slice(1).join("=");if('"'===r.charAt(0)&&(r=r.slice(1,-1)),r=r.replace(t,decodeURIComponent),e===c){n=r;break}e||(n[c]=r)}return n}},o={advertLoad:[]},t=function(t,a,i,c,r,d){var p=function(e){var n={client_id:i};t.ajax({url:"http://changyan.sohu.com/api/2/user/info",cache:!1,dataType:"jsonp",data:n,success:function(n){e(n)},error:function(){e()}})},s=function(n,a){var p="",a=a||0;window.changyan&&window.changyan.api&&"function"==typeof window.changyan.api.ready?window.changyan.api.ready(function(e){var n=e.getUUID();"string"==typeof n&&32===n.length&&(p=n)}):window.cyan&&window.cyan.api&&"function"==typeof window.cyan.api.ready&&window.cyan.api.ready(function(e){var n=e.getUUID();"string"==typeof n&&32===n.length&&(p=n)});var s=function(e,n,o,c,r,d,s,u,y,l,f){var g={appId:i,advertId:e,agencyType:n,pce:o,tag:c,ref:r,uuid:p,uid:a};void 0!==d&&(g.rtbAdId=d),void 0!==s&&(g.winNoticeUrl=s),void 0!==u&&(g.dspId=u),void 0!==y&&(g.type=y),void 0!==l&&(g.category=l),void 0!==f&&(g.isCookieMapping=f),t.ajax({url:"http://e.changyan.sohu.com/dataService/v2/pv",dataType:"jsonp",data:g})},u=function(e,n,o,c,r,d,s,u,y,l){var f={appId:i,advertId:e,agencyType:n,pce:o,tag:c,ref:r,category:l,uuid:p,uid:a};void 0!==d&&(f.rtbAdId=d),void 0!==s&&(f.dspId=s),void 0!==u&&(f.isCookieMapping=u),void 0!==y&&(f.type=y),t.ajax({url:"http://e.changyan.sohu.com/dataService/v2/click",dataType:"jsonp",data:f})},y={appId:i,category:c,title:r,url:d,position:n,uuid:p,uid:a,userAgent:window.navigator.userAgent};1607===y.position&&(y.isLeft=!0),1608===y.position&&(y.isLeft=!1,y.position=1607),t.ajax({url:"http://e.changyan.sohu.com/dataService/v2/getData",data:y,dataType:"jsonp",success:function(n){if(0===n.code){var a={};"RTB"===n.agencyType&&(a=t.parseJSON(n.advertContent),function(){a.exposure_urls instanceof window.Array&&t.each(a.exposure_urls,function(n,o){o.exposureUrl instanceof window.Array&&"number"==typeof o.timeMillis&&window.setTimeout(function(){t.each(o.exposureUrl,function(n,o){e(o)})},1e3*o.timeMillis)})}()),s(n.advertId,n.agencyType,n.pce,n.tag,n.ref,a.rtbAdId,a.winNoticeUrl,a.dspId,a.type,a.category,a.isCookieMapping),n.params=y,n.sendClickLog=function(){"RTB"===n.agencyType&&a.clickUrls&&a.clickUrls.length&&t.each(a.clickUrls,function(n,o){e(o)}),u(n.advertId,n.agencyType,n.pce,n.tag,n.ref,a.rtbAdId,a.dspId,a.cookieMapping,a.type,a.category)};var i,c=o.advertLoad;for(i=0;i<c.length;i++)c[i](n)}}})},u=function(e){t.ajax({url:"http://e.changyan.sohu.com/dataService/getConfig",data:{appId:i},dataType:"jsonp",success:function(n){0===n.code&&"function"==typeof e&&e(n)}})};u(function(e){if(e&&1===e.status){if(e.disabledChannels&&e.disabledChannels.length){var o=!0;if(function(){var n;for(n=0;n<e.disabledChannels.length;n++)e.disabledChannels[n]===c&&(o=!1)}(),o===!1)return}if(e.positions&&e.positions.length){var t=function(n){var o,t;for(o=0;o<e.positions.length;o++)t=parseInt(e.positions[o],10),"wap"===a&&5e3>t||"pc"===a&&t>5e3||("pc"!==a||1530!==t||document.getElementById("SOHUCS"))&&s(t,n)};"mark"===n.get("cy-mark")?p(function(e){var o;e&&e.user_id?o=e.user_id:n.set("cy-mark",null,{expires:-1,path:"/"}),t(o)}):(t(),window.setTimeout(function(){p(function(e){e&&e.user_id&&n.set("cy-mark","mark",{expires:30,path:"/"})})},5e3))}}})},a=function(e){if(window.XMLHttpRequest){var n=e.type,o=e.appId,a="null",i=window.document.title,c=window.location.href;"pc"!==n&&"wap"!==n&&(n="pc"),e.hasOwnProperty("categoryId")&&void 0!==e.categoryId&&(a=e.categoryId),e.hasOwnProperty("title")&&(i=e.title),e.hasOwnProperty("url")&&(c=e.url),t(window.changyanjQuery||window.cyanZepto||window.jQuery,n,o,a,i,c)}};a.on=function(e,n){o[e]&&"function"==typeof n&&o[e].push(n)},"function"!=typeof window.changyanDSP&&(window.changyanDSP=a)}();